(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{UQSp:function(e,t,r){"use strict";t.a={name:"VueRemarkRoot",render:function(e){return e("div",null,this.$slots.default)}}},jj0k:function(e,t,r){"use strict";r.r(t);var o=r("7uw+"),n=r("UQSp"),a=r("Kw5r");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a.a.config.optionMergeStrategies;var i={VueRemarkRoot:n.a},c=function(e){var t=e.options.components=e.options.components||{},r=e.options.computed=e.options.computed||{};Object.keys(i).forEach((function(e){"object"===s(i[e])&&"function"==typeof i[e].render||"function"==typeof i[e]&&"function"==typeof i[e].options.render?t[e]=i[e]:r[e]=function(){return i[e]}}))},u=a.a.config.optionMergeStrategies,l="__vueRemarkFrontMatter",p={excerpt:null,title:"Accessing Metrics",topic:"metrics",type:"how-to",sourceExamples:["examples/config/operator/metrics/prometheus.yml"]};var h=function(e){e.options[l]&&(e.options[l]=p),a.a.util.defineReactive(e.options,l,p),e.options.computed=u.computed({$frontmatter:function(){return e.options[l]}},e.options.computed)},m=Object(o.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("VueRemarkRoot",[r("h1",{attrs:{id:"accessing-metrics"}},[r("a",{attrs:{href:"#accessing-metrics","aria-hidden":"true"}},[e._v("#")]),e._v("Accessing Metrics")]),r("h2",{attrs:{id:"overview"}},[r("a",{attrs:{href:"#overview","aria-hidden":"true"}},[e._v("#")]),e._v("Overview")]),r("p",[e._v("You may query our HTTP endpoint to get the current state of all the metrics that has been made available for you.\nThe metrics are exposed in the "),r("a",{attrs:{href:"https://openmetrics.io/",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("OpenMetrics text format")]),e._v(", and can be scraped by Prometheus or\nother systems that support this format.")]),r("p",[e._v("These metrics are aimed for providing operational insight, and would not be suitable for billing purposes.")]),r("p",[e._v("Please reach out to clarify what metrics you would need access to.")]),r("h2",{attrs:{id:"credentials"}},[r("a",{attrs:{href:"#credentials","aria-hidden":"true"}},[e._v("#")]),e._v("Credentials")]),r("p",[e._v("To use this API, you would need to have a OAuth 2.0 client and be granted the "),r("code",{pre:!0},[e._v("metrics.read")]),e._v(" scope.")]),r("p",[e._v("See: "),r("a",{attrs:{href:"https://docs.wgtwo.com/guide/oauth2/get-client-access-token.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("Get client access token")])]),r("h2",{attrs:{id:"get-metrics-curl"}},[r("a",{attrs:{href:"#get-metrics-curl","aria-hidden":"true"}},[e._v("#")]),e._v("Get metrics, curl")]),r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",{pre:!0,attrs:{class:"language-shell"}},[r("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -s --oauth2-bearer "),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$ACCESS_TOKEN")]),e._v(" https://api.wgtwo.com/metrics/v1")])]),r("h2",{attrs:{id:"get-metrics-prometheus"}},[r("a",{attrs:{href:"#get-metrics-prometheus","aria-hidden":"true"}},[e._v("#")]),e._v("Get metrics, Prometheus")]),r("p",[e._v("The below Prometheus config will scrape the metric endpoint every 30 seconds,\nfetching all available time series. Note that the configuration will contain secrets.")]),r("p",[e._v("You may replace "),r("code",{pre:!0},[e._v("client_secret")]),e._v(" with "),r("code",{pre:!0},[e._v("client_secret_file")]),e._v(" which should contain the path to a file containing the secret.")]),r("p",[e._v("See: "),r("a",{attrs:{href:"https://prometheus.io/docs/prometheus/latest/configuration/configuration/",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("prometheus.io › Configuration")])]),r("source-example",{attrs:{src:e.$sourceExamplesMap["examples/config/operator/metrics/prometheus.yml"]}}),r("h3",{attrs:{id:"example-run-with-docker"}},[r("a",{attrs:{href:"#example-run-with-docker","aria-hidden":"true"}},[e._v("#")]),e._v("Example: Run with Docker")]),r("blockquote",[r("p",[e._v("See: "),r("a",{attrs:{href:"https://prometheus.io/docs/prometheus/latest/installation/#using-docker",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("prometheus.io › Using Docker")])])]),r("p",[e._v("If you run the below commands, you should have Prometheus running successfully.")]),r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",{pre:!0,attrs:{class:"language-bash"}},[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Store sample configuration to prometheus.yml, including actual credentials")]),e._v("\n\n"),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run -p "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("9090")]),e._v(":9090 -v prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus")])]),r("h2",{attrs:{id:"grafana"}},[r("a",{attrs:{href:"#grafana","aria-hidden":"true"}},[e._v("#")]),e._v("Grafana")]),r("p",[e._v("Many of our customers use Grafana to visualize their metrics.")]),r("p",[e._v("In order to use Grafana with our metrics, you would need to have a Prometheus server running and scraping the metrics.")]),r("p",[e._v("An alternative to running this yourself would be to use "),r("a",{attrs:{href:"https://grafana.com/products/cloud/",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("Grafana Cloud")]),e._v(". In that\ncase you would typically run Grafana Agent, which is a Prometheus-compatible agent that can scrape metrics and send them\nto Grafana Cloud.")]),r("h2",{attrs:{id:"links"}},[r("a",{attrs:{href:"#links","aria-hidden":"true"}},[e._v("#")]),e._v("Links")]),r("ul",[r("li",[r("a",{attrs:{href:"https://openmetrics.io/",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("openmetrics.io")])]),r("li",[r("a",{attrs:{href:"https://prometheus.io/",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("prometheus.io")]),e._v(" › "),r("a",{attrs:{href:"https://prometheus.io/docs/instrumenting/exposition_formats/#text-based-format",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("Exposition Formats")])])])],1)}),[],!1,null,null,null);"function"==typeof c&&c(m),"function"==typeof h&&h(m);t.default=m.exports}}]);