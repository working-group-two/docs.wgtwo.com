(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{IHp4:function(t,e,a){"use strict";a.r(e);var s=a("7uw+"),n=a("UQSp"),r=a("Kw5r");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.a.config.optionMergeStrategies;var p={VueRemarkRoot:n.a},i=function(t){var e=t.options.components=t.options.components||{},a=t.options.computed=t.options.computed||{};Object.keys(p).forEach((function(t){"object"===o(p[t])&&"function"==typeof p[t].render||"function"==typeof p[t]&&"function"==typeof p[t].options.render?e[t]=p[t]:a[t]=function(){return p[t]}}))},c=r.a.config.optionMergeStrategies,l="__vueRemarkFrontMatter",u={excerpt:null,title:"Get started",topic:"intro",type:"tutorial",typeOrder:1,roles:["THIRD_PARTY_DEVELOPER","OPERATOR"],sourceExamples:["examples/go/events/main.go"]};var v=function(t){t.options[l]&&(t.options[l]=u),r.a.util.defineReactive(t.options,l,u),t.options.computed=c.computed({$frontmatter:function(){return t.options[l]}},t.options.computed)},_=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VueRemarkRoot",[a("h1",{attrs:{id:"get-started"}},[a("a",{attrs:{href:"#get-started","aria-hidden":"true"}},[t._v("#")]),t._v("Get started")]),a("p",[a("strong",[t._v("This guide will show you how to start using our APIs with a hands on tutorial for listening to events.")])]),a("h2",{attrs:{id:"download-proto-descriptions"}},[a("a",{attrs:{href:"#download-proto-descriptions","aria-hidden":"true"}},[t._v("#")]),t._v("Download proto descriptions")]),a("p",[t._v("You can find our "),a("code",{pre:!0},[t._v(".proto")]),t._v(" files at "),a("a",{attrs:{href:"https://github.com/working-group-two/wgtwoapis",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("https://github.com/working-group-two/wgtwoapis")])]),a("p",[t._v("Download the FileDescriptorSet for our APIs, which contains all our "),a("code",{pre:!0},[t._v(".proto")]),t._v(" files:")]),a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",{pre:!0,attrs:{class:"language-shell"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -L "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://github.com/working-group-two/wgtwoapis/blob/master/image.bin?raw=true'")]),t._v(" -o wgtwo.bin ")])]),a("h2",{attrs:{id:"set-up-grpcurl"}},[a("a",{attrs:{href:"#set-up-grpcurl","aria-hidden":"true"}},[t._v("#")]),t._v("Set up gRPCurl")]),a("p",[t._v("We use "),a("a",{attrs:{href:"https://github.com/fullstorydev/grpcurl",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("gRPCurl")]),t._v(" to invoke the gRPC APIs in this guide.")]),a("p",[t._v("If you don't have gRPCurl installed, you may run it through Docker:")]),a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",{pre:!0,attrs:{class:"language-shell"}},[a("span",{pre:!0,attrs:{class:"token function-name function"}},[t._v("grpcurl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run -v "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("/wgtwo.bin:/wgtwo.bin fullstorydev/grpcurl "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$@")]),t._v('"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])])]),a("h2",{attrs:{id:"sandbox-environment"}},[a("a",{attrs:{href:"#sandbox-environment","aria-hidden":"true"}},[t._v("#")]),t._v("Sandbox environment")]),a("p",[t._v("Our sandboxed environment is hosted at "),a("code",{pre:!0},[t._v("sandbox.api.wgtwo.com")]),t._v(".")]),a("p",[t._v("This is a mock implementation of our gRPC APIs, and does not require any authentication.")]),a("h3",{attrs:{id:"setup-event-streaming"}},[a("a",{attrs:{href:"#setup-event-streaming","aria-hidden":"true"}},[t._v("#")]),t._v("Setup event streaming")]),a("blockquote",[a("p",[a("strong",[t._v("Note:")]),t._v(" This stream will timeout. If it happens while running these examples, just re-run the command.")])]),a("p",[t._v("This will send you all the available events of type "),a("code",{pre:!0},[t._v("SMS_EVENT")]),t._v(":")]),a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",{pre:!0,attrs:{class:"language-shell"}},[t._v("grpcurl -protoset wgtwo.bin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -d "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{ "type": ["SMS_EVENT"] }\'')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  sandbox.api.wgtwo.com:443 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  wgtwo.events.v0.EventsService.Subscribe")])]),a("p",[t._v("You should be able to see mock events such as:")]),a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",{pre:!0,attrs:{class:"language-json"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"event"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"smsEvent"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3990fb66-eea0-42ef-9699-1af05516ce00"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"fromE164"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"e164"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+46724450024"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"toE164"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"e164"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+4799977540"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"direction"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"FROM_SUBSCRIBER"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uuid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"b922f707-f6ce-4369-b816-1051bfa40e0d"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"owner"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"phoneNumber"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"e164"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+46724450024"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])])]),a("p",[t._v("Leave the command running for the next step.")]),a("h3",{attrs:{id:"explore-the-api"}},[a("a",{attrs:{href:"#explore-the-api","aria-hidden":"true"}},[t._v("#")]),t._v("Explore the API")]),a("p",[t._v("For exploring the API we recommend "),a("a",{attrs:{href:"https://github.com/fullstorydev/grpcui",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("gRPC UI")]),t._v(".")]),a("p",[t._v("If you don't have "),a("strong",[t._v("gRPC UI")]),t._v(" installed, you may run it through Docker:")]),a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",{pre:!0,attrs:{class:"language-shell"}},[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run -v "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("/wgtwo.bin:/wgtwo.bin -p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v(":8080 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  fullstorydev/grpcui -protoset wgtwo.bin sandbox.api.wgtwo.com:443\n$ "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - or -")]),t._v("\n$ grpcui -protoset wgtwo.bin sandbox.api.wgtwo.com:443")])]),a("h2",{attrs:{id:"production-environment"}},[a("a",{attrs:{href:"#production-environment","aria-hidden":"true"}},[t._v("#")]),t._v("Production environment")]),a("p",[t._v("Our production environment is hosted at "),a("code",{pre:!0},[t._v("api.wgtwo.com")]),t._v(".")]),a("p",[t._v("This part of the guide will show you how to create a OAuth 2.0 token and use that to connected to our event stream.")]),a("h3",{attrs:{id:"create-oauth-20-client"}},[a("a",{attrs:{href:"#create-oauth-20-client","aria-hidden":"true"}},[t._v("#")]),t._v("Create OAuth 2.0 client")]),a("p",[t._v("Before you start, see "),a("a",{attrs:{href:"/oauth-2-0/create-o-auth-2-0-client/"}},[t._v("Create OAuth 2.0 client")]),t._v(". You need enable the scope "),a("code",{pre:!0},[t._v("events.sms.subscribe")]),t._v(".")]),a("h3",{attrs:{id:"get-access-token-using-the-client-credentials-flow"}},[a("a",{attrs:{href:"#get-access-token-using-the-client-credentials-flow","aria-hidden":"true"}},[t._v("#")]),t._v("Get access token (using the Client Credentials Flow)")]),a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",{pre:!0,attrs:{class:"language-shell"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -s -u "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${CLIENT_ID}")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${CLIENT_SECRET}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# <- Replace CLIENT_ID & CLIENT_SECRET \\")]),t._v("\n    --request POST "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --url "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://id.wgtwo.com/oauth2/token'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --header "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type: application/x-www-form-urlencoded'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --data "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("grant_type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"client_credentials"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --data "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("scope")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"events.sms.subscribe"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" jq "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")])])]),a("h3",{attrs:{id:"setup-stream-listening-for-events"}},[a("a",{attrs:{href:"#setup-stream-listening-for-events","aria-hidden":"true"}},[t._v("#")]),t._v("Setup stream listening for events")]),a("blockquote",[a("p",[a("strong",[t._v("Note:")]),t._v(" This stream will timeout. We expect you to automatically reconnect when that happens.")]),a("p",[t._v("For details, see: "),a("a",{attrs:{href:"/events/configuration-and-types/#recommended-production-configuration"}},[t._v("Configuration and types âŒª Recommended production configuration")]),t._v(".")])]),a("p",[t._v("This will send you all the available events of type "),a("code",{pre:!0},[t._v("SMS_EVENT")]),t._v(". As nobody has consented to share their events to you,\nthe stream will be silent until someone has given consent and sent an SMS.")]),a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",{pre:!0,attrs:{class:"language-shell"}},[t._v("grpcurl -H "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Authorization: Bearer '),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${ACCESS_TOKEN}")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -protoset wgtwo.bin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -d "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{ "type": ["SMS_EVENT"] }\'')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  api.wgtwo.com:443 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  wgtwo.events.v0.EventsService.Subscribe")])]),a("h4",{attrs:{id:"example-code-for-go"}},[a("a",{attrs:{href:"#example-code-for-go","aria-hidden":"true"}},[t._v("#")]),t._v("Example code for Go")]),a("h5",{attrs:{id:"download-and-run-code-example"}},[a("a",{attrs:{href:"#download-and-run-code-example","aria-hidden":"true"}},[t._v("#")]),t._v("Download and run code example")]),a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",{pre:!0,attrs:{class:"language-shell"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -sL https://github.com/working-group-two/docs.wgtwo.com/raw/master/examples/go/events/main.go -o main.go\ngo mod init example\ngo mod tidy\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CLIENT_ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${CLIENT_ID}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CLIENT_SECRET")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${CLIENT_SECRET}")]),t._v(" go run main.go")])]),a("p",[a("strong",[t._v("Example source code: "),a("code",{pre:!0},[t._v("main.go")])]),a("source-example",{attrs:{src:t.$sourceExamplesMap["examples/go/events/main.go"]}})],1),a("h2",{attrs:{id:"whats-next"}},[a("a",{attrs:{href:"#whats-next","aria-hidden":"true"}},[t._v("#")]),t._v("What's next?")]),a("h3",{attrs:{id:"i-am-building-a-subscriber-product"}},[a("a",{attrs:{href:"#i-am-building-a-subscriber-product","aria-hidden":"true"}},[t._v("#")]),t._v("I am building a subscriber product")]),a("p",[t._v("All APIs, except the event API, will require an access token obtained via the "),a("a",{attrs:{href:"/oauth-2-0/get-user-access-token/"}},[t._v("Authorization Code Grant")]),t._v(".")]),a("p",[t._v("By implementing this flow, your users can authenticate on our platform and grant consent to your application. Once this flow is up, and users have consented, you will start getting events.")]),a("p",[t._v("There is a special event named "),a("code",{pre:!0},[t._v("CONSENT_REVOKE_EVENT")]),t._v(" that you must listen for, as this will fire if the\nconsent is removed by the user through e.g. customer support. See "),a("a",{attrs:{href:"/oauth-2-0/support-revoking-consent/"}},[t._v("support revoking consent")]),t._v(". This event does not require a explicit scope.")]),a("p",[t._v("When you are done testing, you can submit your product so that it can be reviewed and listed in our marketplace.")]),a("h3",{attrs:{id:"i-am-building-an-operator-product"}},[a("a",{attrs:{href:"#i-am-building-an-operator-product","aria-hidden":"true"}},[t._v("#")]),t._v("I am building an operator product")]),a("p",[t._v("You can contact us directly at "),a("a",{attrs:{href:"mailto:products@wgtwo.com",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("products@wgtwo.com")]),t._v(" in order to add test subscription(s) to your product.\nUnfortunately, at this time it is not possible to do this yourself.")]),a("p",[t._v("When you are done with your testing, you may submit your product so that it can be reviewed and listed in our marketplace.")]),a("h2",{attrs:{id:"summary"}},[a("a",{attrs:{href:"#summary","aria-hidden":"true"}},[t._v("#")]),t._v("Summary")]),a("p",[t._v("In this tutorial we have looked at getting mocked events using gRPC (using "),a("strong",[t._v("gRPCurl")]),t._v(" and "),a("strong",[t._v("gRPC UI")]),t._v("). We have sent an SMS and seen it appear in the events stream. We've also looked at creating a OAuth 2.0 client and moving to the production environment. We've also briefly mentioned publishing your product to a marketplace.")]),a("p",[t._v("These steps; integrating, moving to production, publishing to a marketplace; are the fundemental steps needed to launch a product on our platform.")])])}),[],!1,null,null,null);"function"==typeof i&&i(_),"function"==typeof v&&v(_);e.default=_.exports},UQSp:function(t,e,a){"use strict";e.a={name:"VueRemarkRoot",render:function(t){return t("div",null,this.$slots.default)}}}}]);