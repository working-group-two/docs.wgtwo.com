{"hash":"3dabf4d4cb5c46228e18a5f2e895001a2f2fec7c","data":{"doc":{"title":"PBX/TAS integration","headings":[{"value":"Plug your SIP-enabled PBX or TAS¹ into the call path"}],"subtitles":[{"depth":1,"value":"Plug your SIP-enabled PBX or TAS¹ into the call path","anchor":"#plug-your-sip-enabled-pbx-or-tas¹-into-the-call-path"},{"depth":2,"value":"Prerequisites","anchor":"#prerequisites"},{"depth":2,"value":"Overview","anchor":"#overview"},{"depth":2,"value":"The API","anchor":"#the-api"},{"depth":3,"value":"Messages","anchor":"#messages"},{"depth":3,"value":"Registration types","anchor":"#registration-types"},{"depth":4,"value":"Fork/Loop","anchor":"#forkloop"},{"depth":4,"value":"Fallback","anchor":"#fallback"},{"depth":3,"value":"Example code","anchor":"#example-code"},{"depth":2,"value":"Concepts","anchor":"#concepts"}],"roles":["THIRD_PARTY_DEVELOPER","OPERATOR"],"hideWarning":null,"sourceExamples":[{"file":"examples/kotlin/thirdpartydev/sipbreakout/src/main/kotlin/com/wgtwo/examples/thirdpartydev/sipbreakout/sipbreakout.kt","content":"package com.wgtwo.examples.thirdpartydev.sipbreakout;\n\nimport com.wgtwo.api.common.Environment\nimport com.wgtwo.api.sipbreakout.v0.RegistrationRequest\nimport com.wgtwo.api.sipbreakout.v0.SipBreakoutServiceGrpcKt\nimport com.wgtwo.api.util.auth.BearerToken\nimport com.wgtwo.api.util.auth.Channels\nimport io.grpc.StatusException\nimport kotlinx.coroutines.ExperimentalCoroutinesApi\nimport kotlinx.coroutines.runBlocking\n\nprivate val channel = Channels.createChannel(Environment.SANDBOX)\nprivate val credentials =\n    BearerToken { \"MY_ACCESS_TOKEN\" } // Add your _client credentials_ access token (not user access token)\nprivate val stub = SipBreakoutServiceGrpcKt.SipBreakoutServiceCoroutineStub(channel)\n    .withCallCredentials(credentials)\n\n@ExperimentalCoroutinesApi\nfun main() {\n\n    // building RegistrationRequest\n    val request = RegistrationRequest.newBuilder().apply {\n        suri = \"sips:example.com:8888\"\n        moPrefix = \"11\"\n        mtPrefix = \"22\"\n        routeType = RegistrationRequest.RouteType.LOOP\n    }.build()\n\n    runBlocking {\n        try {\n            var response = stub.upsertRegistration(request)\n            println(\"upsert: got response $response\")\n\n            response = stub.deleteRegistration(request)\n            println(\"delete: got response $response\")\n        } catch (e : StatusException) {\n            println(\"got error $e\")\n        }\n    }\n\n}\n"},{"file":"examples/grpcurl/thirdpartydev/sipbreakout/register.sh","content":"# Access token must be obtained via the client credentials flow\ngrpcurl -protoset wgtwo.bin \\\n  -d '\n  {\n      mo_prefix = \"11\",\n      mt_prefix = \"22\",\n      suri=\"sips:example.com:8888\",\n      route_type=\"LOOP\"\n  }\n  ' \\\n  api.wgtwo.com:443 wgtwo.sipbreakout.v0.SipBreakoutService/UpsertRegistration\n"}]}},"context":{}}